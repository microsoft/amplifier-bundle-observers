# Multi-Observer Configuration
#
# Multiple specialized observers running in parallel for comprehensive review.
# Each observer focuses on a specific aspect of code quality.
#
# Observer references use @bundle:path format, resolved via mention_resolver capability.

hooks:
  - module: hooks-observations
    source: git+https://github.com/payneio/amplifier-bundle-observers@main#subdirectory=modules/hooks-observations
    config:
      hooks:
        - trigger: "orchestrator:complete"
          priority: 5

      execution:
        mode: parallel_sync
        max_concurrent: 5
        timeout_per_observer: 45
        on_timeout: skip

      observers:
        # Security focused review
        - observer: "@observers:observers/security-auditor"
          watch:
            - type: files
              paths:
                - "src/**/*.py"
            - type: conversation
              include_tool_calls: true

        # Secrets detection
        - observer: "@observers:observers/secrets-scanner"
          watch:
            - type: files
              paths:
                - "**/*.py"
                - "**/*.yaml"
                - "**/*.json"
                - "**/*.env*"

        # Performance analysis
        - observer: "@observers:observers/performance-reviewer"
          watch:
            - type: files
              paths:
                - "src/**/*.py"

        # Test coverage
        - observer: "@observers:observers/test-quality"
          watch:
            - type: files
              paths:
                - "src/**/*.py"
                - "tests/**/*.py"

        # Logic and reasoning
        - observer: "@observers:observers/logic-checker"
          watch:
            - type: conversation
              include_tool_calls: true
              include_reasoning: true
