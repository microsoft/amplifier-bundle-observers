# Multi-Bundle Observer Configuration
#
# Demonstrates loading observers from different bundles.
# Each bundle can provide its own specialized observers.
#
# Use cases:
# - Company-specific observers from internal bundles
# - Community observers from public bundles
# - Project-specific observers from local directories

hooks:
  - module: hooks-observations
    source: git+https://github.com/payneio/amplifier-bundle-observers@main#subdirectory=modules/hooks-observations
    config:
      hooks:
        - trigger: "orchestrator:complete"
          priority: 5

      execution:
        mode: parallel_sync
        max_concurrent: 5
        timeout_per_observer: 45
        on_timeout: skip

      # Bundle sources - map bundle names to their base paths
      # Paths can be:
      # - Absolute paths: /home/user/bundles/my-bundle
      # - Relative paths: ./my-local-observers
      # - Environment variables can be expanded by your deployment
      sources:
        # The observers bundle (this one)
        observers: /path/to/amplifier-bundle-observers
        
        # A company-internal bundle with proprietary observers
        company: /path/to/company-observers-bundle
        
        # A project-specific bundle
        project: ./project-observers

      observers:
        # From the observers bundle (standard)
        - observer: observers:observers/security-auditor
          watch:
            - type: files
              paths: ["**/*.py"]

        # From company bundle (internal policies)
        - observer: company:observers/compliance-checker
          watch:
            - type: files
              paths: ["**/*"]

        # From company bundle (internal security standards)
        - observer: company:observers/internal-security
          watch:
            - type: files
              paths: ["**/*.py", "**/*.yaml"]

        # From project bundle (project-specific rules)
        - observer: project:observers/project-conventions
          watch:
            - type: files
              paths: ["src/**/*.py"]

        # Local file (not in any bundle)
        - observer: ./my-custom-observer.md
          watch:
            - type: conversation
              include_tool_calls: true
